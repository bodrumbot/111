<!doctype html>
<html lang="uz">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"/>
  <meta name="theme-color" content="#0f0f0f"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <title>BODRUM - Admin</title>
  <link rel="stylesheet" href="admin.css"/>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="mobile-header">
    <div class="header-content">
      <div class="brand">BODRUM</div>
      <div class="header-actions">
        <div class="status-badge">
          <span class="pulse-dot"></span>
          <span>Online</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="mobile-content">
    
    <!-- 1. BUYURTMALAR -->
    <section id="ordersSection" class="tab-panel active">
      <div class="section-header">
        <h2>üì¶ Buyurtmalar</h2>
        <div class="quick-stats">
          <div class="quick-stat">
            <span class="stat-num" id="newOrdersCount">0</span>
            <span class="stat-label">Yangi</span>
          </div>
          <div class="quick-stat">
            <span class="stat-num" id="todayRevenue">0</span>
            <span class="stat-label">Bugun</span>
          </div>
        </div>
      </div>

      <!-- Faqat qabul qilingan buyurtmalar sarlavhasi -->
      <div class="orders-header-simple">
        <h3>‚úÖ Qabul qilingan buyurtmalar</h3>
      </div>

      <div class="orders-list-container" id="ordersListContainer">
        <div class="empty-state">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
          </svg>
          <p>Qabul qilingan buyurtmalar yo'q</p>
        </div>
      </div>
    </section>

    <!-- 2. MIJOZLAR -->
    <section id="customersSection" class="tab-panel">
      <div class="section-header">
        <h2>üë• Mijozlar</h2>
        <div class="search-container">
          <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          <input type="text" class="search-input" placeholder="Ism yoki telefon..." id="customerSearch" oninput="searchCustomers()">
        </div>
      </div>

      <div class="stats-row">
        <div class="stat-card-small">
          <span class="sc-number" id="totalCustomers">0</span>
          <span class="sc-label">Jami</span>
        </div>
        <div class="stat-card-small vip">
          <span class="sc-number" id="vipCustomers">0</span>
          <span class="sc-label">VIP</span>
        </div>
        <div class="stat-card-small active">
          <span class="sc-number" id="activeToday">0</span>
          <span class="sc-label">Bugun</span>
        </div>
      </div>

      <div class="customers-list" id="customersList"></div>
    </section>

    <!-- 3. STATISTIKA -->
    <section id="statsSection" class="tab-panel">
      <div class="section-header">
        <h2>üìä Statistika</h2>
        <div class="period-selector">
          <button class="period-btn active" onclick="setPeriod('day')">Kun</button>
          <button class="period-btn" onclick="setPeriod('week')">Hafta</button>
          <button class="period-btn" onclick="setPeriod('month')">Oy</button>
        </div>
      </div>

      <div class="big-stats">
        <div class="big-stat">
          <div class="bs-icon">üí∞</div>
          <div class="bs-info">
            <span class="bs-value" id="statRevenue">0</span>
            <span class="bs-label">Daromad</span>
          </div>
        </div>
        <div class="big-stat">
          <div class="bs-icon">üì¶</div>
          <div class="bs-info">
            <span class="bs-value" id="statOrders">0</span>
            <span class="bs-label">Buyurtma</span>
          </div>
        </div>
      </div>

      <div class="chart-container">
        <canvas id="mainChart"></canvas>
      </div>

      <div class="top-section">
        <h3>üèÜ Top mahsulotlar</h3>
        <div class="top-list" id="topProductsList"></div>
      </div>
    </section>

  </main>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <button class="nav-item active" onclick="switchTab('orders')" data-tab="orders">
      <div class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        <span class="nav-badge" id="ordersNavBadge">0</span>
      </div>
      <span class="nav-label">Buyurtmalar</span>
    </button>

    <button class="nav-item" onclick="switchTab('customers')" data-tab="customers">
      <div class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
          <circle cx="9" cy="7" r="4"></circle>
          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
      </div>
      <span class="nav-label">Mijozlar</span>
    </button>

    <button class="nav-item" onclick="switchTab('stats')" data-tab="stats">
      <div class="nav-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="20" x2="18" y2="10"></line>
          <line x1="12" y1="20" x2="12" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="14"></line>
          <path d="M3 20h18"/>
        </svg>
      </div>
      <span class="nav-label">Statistika</span>
    </button>
  </nav>

  <!-- Order Detail Modal -->
  <div id="orderModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">
          <span>Buyurtma #</span>
          <span id="modalOrderId"></span>
        </div>
        <button class="close-btn" onclick="closeModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="customer-info-card">
          <div class="info-row">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ff6600" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="info-content">
              <span class="info-label">Mijoz</span>
              <span class="info-value" id="modalCustomer"></span>
            </div>
          </div>
          
          <div class="info-row">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ff6600" stroke-width="2">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
            </svg>
            <div class="info-content">
              <span class="info-label">Telefon</span>
              <span class="info-value" id="modalPhone"></span>
            </div>
          </div>

          <div class="info-row" id="locationRow">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#ff6600" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <div class="info-content">
              <span class="info-label">Manzil</span>
              <a id="modalLocation" class="location-link" target="_blank">Xaritada ko'rish ‚Üí</a>
            </div>
          </div>

          <div class="info-row">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00ff88" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"></line>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            <div class="info-content">
              <span class="info-label">Summa</span>
              <span class="info-value price" id="modalTotal"></span>
            </div>
          </div>
        </div>

        <div class="items-section">
          <h4>üçΩ Mahsulotlar</h4>
          <div class="items-list" id="modalItems"></div>
        </div>

        <div class="payment-info">
          <span class="payment-label">To'lov usuli:</span>
          <span class="payment-method" id="modalPayment"></span>
        </div>
      </div>

      <!-- Modal footer - tugmalar yashirilgan (faqat ma'lumot ko'rsatish uchun) -->
      <div class="modal-footer" id="modalActions" style="display: none;">
        <!-- Tugmalar olib tashlandi, chunki faqat qabul qilingan buyurtmalar ko'rsatiladi -->
      </div>
    </div>
  </div>

  <!-- Customer Detail Modal -->
  <div id="customerModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-title">üë§ Mijoz ma'lumotlari</div>
        <button class="close-btn" onclick="closeCustomerModal()">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body" id="customerDetailContent"></div>
    </div>
  </div>

  <!-- Audio -->
  <audio id="notifySound" preload="auto">
    <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleR0NZKrk7rNsGgxJkNTsvXwkDk+L0O+0eyUOUIjN7LR7JQ1Ph8ztsnwlDU6HzOu0fCUOTofM6bN8JQ5MhszpsnwlDkyGzOixfCUOS4bM6LB8JQ5LhsznsHwlDkqGzOewfCUOSYXM5q98JQ5Ihczmr3wlDkiFzOaufCUOR4XM5at8JQ5GhczlqnwkDkWFzOSnfCUOQ4XM5KN8JQ5Chczjn3wlDj+EzOKdfCUOPoTM4Z18JQ49hMzhnHwlDjuEzN+dfCUOOoTM3J18JQw5hMzZnXwlDDiEzNeefCUMN4TM1Z18JQw2hMy9nXwlDC6EzK2dfCUMKoTMpZ18JQwihMyhnXwlDCGEzH2dfCUMHoTMfJ18JQwehMx8nXwlDBqEzHidfCUMFoTMd518JQwShMxynXwlDA6EzG6dfCUMDoTMZ518JQwKhMxjnXwlDAaEzF+dfCUL/nMw/nXwlC/2czD6dfCUL9JzMPZ18JQvwnMw5nXwlC+yczDWdfCUL7JzMMZ18JQvonMv5mXwlC9Scy6mZfCUL0JzLaZV8JQvMnMoplXwlC7ycyiWVfCULrJzJ4ZV8JQusnMnRlXwlC5ycybGVfCULnJzJUZV8JQucnMgRlXwlC4ycx/GVfCULjJzHsZV8JQuMnMbRlXwlC3ycxhGVfCULTJy3kZV8JQtInLZRlXwlCzScs1GVfCULKJyiUZV8JQsknJ9RlXwlCnScjFGVfCUKVJyHMZV8JQpEnH4RlXwlChScfRGVfCUKFJx6EZV8JQoEnHYRlXwlCfSccxGVfCUKBJxuEZV8JQoEnGoRlXwlCeScaZGVfCUKBJxkkZV8JQoEnGGRlXwlCdScXxGVfCUKBJxdkZV8JQoEnFURlXwlCaScUxGVfCUKBJxQkZV8JQoEnE0RlXwlCXScQhGVfCUKBJw+EZV8JQoEnDwRlXwlCWScOhGVfCUKBJw2EZV8JQlUnDYRlXwlCVScNBGVfCUKRJwv0ZV8JQlEnC6RlXwlCPScLmRlXwlCNScK5GVfCUKMJwnkZV8JQi0nCaRlXwlCHScJBGVfCUKMJwekZV8JQgknB2RlXwlB+ScGxGVfCUIHJwaEZV8JQfknBaRlXwlB9ScFRGVfCUIHJwQkZV8JQfEnA+RlXwlB7ScDpGVfCUIHJwMkZV8JQe0nAiRlXwlB5ScB5GVfCUIHJv/kZV8JQd0m/5RlXwlBxSb9lGVfCUG1Ju1kZV8JQY0m5SRlXwlBdSbhFGVfCUGFJtzkZV8JQXEm2GRlXwlBZSbUxGVfCUFVJtIkZV8JQT0mzCRlXwkA1JqjEZV8JAM0mmIRlXwj/tJpfkZV8Iw7SaV5GVfCL+0mjMRlXwi6tJncEZV8IubSaUxGVfCKm0mcIRlXwiYdJm9EZV8Il3SZrRGlfCJVkmZURlXwiTNJmJEZV8IjTSZfRGlfCIk0mWkRlXwh/NJlcEZV8IfjSZUxGVfCHo0mTIRlXwh2NJkNEZV8IdTSZCRIVfCG40mPURlXwhjNJjlEZV8IWjSY1RGlfCFYUmLkRlXwhUFJixEZV8IPzSYoRGlfCDk0mJURlXwg2NJh9EZV8IWTSYXRGlfCFQ0mE0RlXwgzNJg9EZV8ITjSX/RGVfCDI0l+URlXwgvNJfdEZV8ILTSWzRGlfCCk0loURlXwgkNJZ9EZV8IHjSWTRGVfCBY0lhkRlXB7Q0kzkRlXBzQ0k9kRlXBqA0kzkRlXBpANJM5EZVwZvNJLpEZVwZbNJKnEZVwZTNI+ZEVlXBjM0jpkRlXBec0jfkRlXBcM0jXkRlXBXM0jVkRlXBP80i1kRlXA/M0iwkRlXAvM0iskRlXAtM0ipkRlXAqM0iokRlXAoM0inkRlXAnM0imkRlXAlM0ijkRlXAjM0ihkRlXAgM0ifkRlXAfM0idkRlXAdM0ibkRlXAbM0iakRlXAaM0iXkRlXAZM0iWkRlXAXM0iUkRlXAVM0iTkRlXATM0iSkRlXARM0iRkRlW/8M0h/kRlW/6M0h7kRlW/4M0h5kRlW/2M0h3kRlW/0M0h1kRlW/yM0hzkRlW/wM0hxkRlW/uM0hvkRlW/sM0htkRlW/qM0hrkRlW/oM0hpkRlW/mM0hnkRlW/kM0hlkRlW/iM0hjkRlW/gM0hhkRlW/eM0hfkRlW/cM0hdkRlW/aM0hbkRlW/ZM0hZkRlW/XM0hXkRlW/VM0hTkRlW/RM0hSkRlW/PM0hRkRlW/NM0hPkRlW/LM0hNkRlW/JM0hLkRlW/HM0hJkRlW/FM0hHkRlW/DM0hFkRlW/BM0hDkRlW//M0hBkRlW/9M0h9kRlW/7M0h7kRlW/5M0h5kRlW/3M0h3kRlW/1M0h1kRlW/zM0hzkRlW/xM0hxkRlW/vM0hvkRlW/tM0htkRlW/rM0hrkRlW/pM0hpkRlW/nM0hnkRlW/lM0hlkRlW/jM0hjkRlW/hM0hhkRlW/fM0hfkRlW/dM0hdkRlW/bM0hbkRlW/aM0hZkRlW/Y8zgAAA=" type="audio/wav">
  </audio>

  <!-- Admin script -->
  <script type="module" src="./admin.js"></script>
</body>
</html>
